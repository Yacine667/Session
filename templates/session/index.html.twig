{% extends 'base.html.twig' %}

{% block title %}Sessions De Formation{% endblock %}

{% block body %}

{% set now = date() %}

<h1>Liste Des Sessions</h1>

<div class=containerSession>

    

    <div class=session>

        <span class=leftTitle>Sessions En Cours</span>
                
        <table>

            <tr>
                <th>Statut</th>
                <th>Disponibilité</th>
                <th>Session</th>
                <th>Formateur</th>
                <th>Commence Le</th>
                <th>Finis Le</th>
                <th>Inscrits</th>
            </tr>

            {% for session in currentSessions %}

            <tr>
                <td> 
                    {% if now > session.dateDebut and now < session.dateFin %}
                    <span> En Cours </span>

                    {% elseif now < session.dateDebut %}
                    <span> A Venir </span>

                    {% else %}
                    <span> Terminée </span>


                    {% endif %}

                </td>
                <td>
                    {% if session.stagiaires | length == session.nombrePlace %}
                    <span> Complet </span>  

                    {% else %}
                    <span> Disponible </span> 
                    
                    {% endif %}
                </td>
                <td class=actionIcons >{{ session.nomSession }} <a href="{{ path('detail_session', {'id': session.id}) }}"><i class="fa-solid fa-circle-info"></i></a></td>
                <td>{{ session.Formateur.prenomFormateur }} {{ session.Formateur.nomFormateur }}</td>
                <td>{{ session.dateDebut | date('d/m/Y') }}</td>
                <td>{{ session.dateFin | date('d/m/Y')  }}</td> 
                <td>{{ session.stagiaires | length }}/{{ session.nombrePlace }}</td>
                <td class=actionIcons > <br> <a href="{{ path('delete_session', {'id': session.id}) }}"><i class="fa-solid fa-delete-left"></i></a></td>
            </tr>   

            {% endfor %}

        </table>  

        </div>  

        <div class=session>

        <span class=leftTitle>Sessions Programmées</span>

        <table>
            <tr>
                <th>Statut</th>
                <th>Disponibilité</th>
                <th>Session</th>
                <th>Formateur</th>
                <th>Commence Le</th>
                <th>Finis Le</th>
                <th>Inscrits</th>
            </tr>

            {% for session in upcomingSessions %}

            <tr>
                <td> 
                    {% if now > session.dateDebut and now < session.dateFin %}
                    <span> En Cours </span>

                    {% elseif now < session.dateDebut %}
                    <span> A Venir </span>

                    {% else %}
                    <span> Terminée </span>


                    {% endif %}

                </td>
                <td>
                    {% if session.stagiaires | length == session.nombrePlace %}
                    <span> Complet </span>  

                    {% else %}
                    <span> Disponible </span> 
                    
                    {% endif %}
                </td>
                <td>{{ session.nomSession }}</td>
                <td class=actionIcons >{{ session.nomSession }} <a href="{{ path('detail_session', {'id': session.id}) }}"><i class="fa-solid fa-circle-info"></i></a></td>
                <td>{{ session.Formateur.prenomFormateur }} {{ session.Formateur.nomFormateur }}</td>
                <td>{{ session.dateDebut | date('d/m/Y') }}</td>
                <td>{{ session.dateFin | date('d/m/Y')  }}</td> 
                <td>{{ session.stagiaires | length }}/{{ session.nombrePlace }}</td>
                <td class=actionIcons > <br> <a href="{{ path('delete_session', {'id': session.id}) }}"><i class="fa-solid fa-delete-left"></i></a></td>
            </tr> 

            {% endfor %}

        </table>  

        </div>  

        <div class=session>

        <span class=leftTitle>Sessions Passées</span>

        <table>
            <tr>
                <th>Statut</th>
                <th>Disponibilité</th>
                <th>Session</th>
                <th>Formateur</th>
                <th>Commence Le</th>
                <th>Finis Le</th>
                <th>Inscrits</th>
            </tr>

            {% for session in pastSessions %}

            <tr>
                <td> 
                    {% if now > session.dateDebut and now < session.dateFin %}
                    <span> En cours </span>

                    {% elseif now < session.dateDebut %}
                    <span> A Venir </span>

                    {% else %}
                    <span> Terminée </span>


                    {% endif %}

                </td>
                <td>
                    {% if session.stagiaires | length == session.nombrePlace %}
                    <span> Complet </span>  

                    {% else %}
                    <span> Session Terminée </span>
                    
                    {% endif %}
                </td>
                <td class=actionIcons >{{ session.nomSession }} <a href="{{ path('detail_session', {'id': session.id}) }}"><i class="fa-solid fa-circle-info"></i></a></td>
                <td>{{ session.Formateur.prenomFormateur }} {{ session.Formateur.nomFormateur }}</td>
                <td>{{ session.dateDebut | date('d/m/Y') }}</td>
                <td>{{ session.dateFin | date('d/m/Y')  }}</td> 
                <td>{{ session.stagiaires | length }}/{{ session.nombrePlace }}</td>
                <td class=actionIcons > <br> <a href="{{ path('delete_session', {'id': session.id}) }}"><i class="fa-solid fa-delete-left"></i></a></td>
            </tr>   

            {% endfor %}

        </table>

        </div>  

</div>

{% endblock %}

